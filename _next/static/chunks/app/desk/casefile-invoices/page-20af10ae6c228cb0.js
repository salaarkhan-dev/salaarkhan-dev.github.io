(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[584],{477:()=>{},833:(e,t,l)=>{"use strict";l.d(t,{M:()=>n});var r=l(5155),i=l(2115),a=l(7645);function n(e){let{children:t,action:l="highlight",color:n="#ffd1dc",strokeWidth:s=1.5,animationDuration:o=600,iterations:d=2,padding:c=2,multiline:m=!0}=e,u=(0,i.useRef)(null),x=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=u.current;if(e){let t=(0,a.f)(e,{type:l,color:n,strokeWidth:s,animationDuration:o,iterations:d,padding:c,multiline:m});return x.current=t,t.show(),()=>{try{var e;null==(e=x.current)||e.remove()}catch(e){}finally{x.current=null}}}},[l,n,s,o,d,c,m]),(0,r.jsx)("span",{ref:u,className:"relative inline-block bg-transparent",children:t})}},1609:(e,t,l)=>{"use strict";l.d(t,{J:()=>a});var r=l(5155),i=l(3999);let a=(0,l(2115).forwardRef)((e,t)=>{let{className:l,type:a,...n}=e;return(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"absolute -bottom-1 -right-1 w-full h-full border-r border-b border-foreground/20 group-hover:border-foreground/40 transition-all duration-300 -z-10"}),(0,r.jsx)("input",{type:a,className:(0,i.cn)("block w-full bg-background/80 px-3 py-2 text-sm font-serif","border border-foreground/30 focus:outline-none focus:ring-1 focus:ring-foreground/50","transition-all duration-200 placeholder:text-foreground/50","date"===a&&"appearance-none h-9 leading-none [&::-webkit-date-and-time-value]:text-[11px] [&::-webkit-datetime-edit]:py-0 [&::-webkit-datetime-edit]:my-0",l),ref:t,...n})]})});a.displayName="VintageInput"},3781:(e,t,l)=>{"use strict";l.d(t,{Section:()=>o});var r=l(5155),i=l(3999),a=l(2115),n=l(833),s=l(7597);function o(e){let{id:t,title:l,heading:o,tagline:d,decorativeText:c,children:m,className:u,decorativeTextClassName:x,headingSize:p="small",fullWidth:b=!1}=e,{torchEnabled:h}=(0,s.i)(),[g,f]=(0,a.useState)(!1);return(0,a.useEffect)(()=>f(!0),[]),(0,r.jsxs)("section",{id:t,className:(0,i.cn)("py-12 relative mx-auto ",b?"":" max-w-5xl px-4 sm:px-6",u),children:[(0,r.jsxs)("div",{className:(0,i.cn)("text-center mb-12 border-b-1 border-foreground/20 pb-6",b&&"max-w-3xl mx-auto px-4 sm:px-6 relative"),children:[(0,r.jsx)("div",{className:"text-xs uppercase tracking-widest text-muted-foreground mb-2",children:l}),"large"===p?(0,r.jsx)("h2",{className:"text-3xl md:text-5xl font-bold font-serif text-foreground",children:o}):(0,r.jsx)("h3",{className:"text-2xl md:text-3xl font-bold font-serif text-foreground",children:o}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground mt-2 italic font-serif",children:["“",d,"“"]}),b&&(0,r.jsx)("div",{className:(0,i.cn)("uppercase absolute -top-10 -right-2 text-[86px] xs:text-[100px] sm:text-[150px] md:text-[200px] leading-none font-bold font-serif text-foreground/10 md:text-foreground/5 -z-10 select-none pointer-events-none",x),children:g&&h?(0,r.jsx)(n.M,{action:"circle",color:"#FF9800",strokeWidth:1.5,animationDuration:600,iterations:2,padding:2,children:(0,r.jsx)("span",{children:c})}):(0,r.jsx)("span",{children:c})})]}),m,!b&&(0,r.jsx)("div",{className:(0,i.cn)("uppercase absolute top-10 sm:top-0 right-0 text-[86px] xs:text-[100px] sm:text-[150px] md:text-[200px] leading-none font-bold font-serif text-foreground/10 md:text-foreground/5 -z-10 select-none pointer-events-none",x),children:g&&h?(0,r.jsx)(n.M,{action:"circle",color:"#FF9800",strokeWidth:1.5,animationDuration:600,iterations:2,padding:2,children:(0,r.jsx)("span",{children:c})}):(0,r.jsx)("span",{children:c})})]})}},3999:(e,t,l)=>{"use strict";l.d(t,{D:()=>s,cn:()=>n,l:()=>o});var r=l(2596),i=l(9688),a=l(9641).Buffer;function n(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];return(0,i.QP)((0,r.$)(t))}let s=e=>window.atob?window.atob(e):a.from(e,"base64").toString("utf-8");function o(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",l="0123456789",r="";for(let i=0;i<5;i++)i%2==0?r+=t.charAt((e.charCodeAt(i%e.length)+i)%t.length):r+=l.charAt((e.charCodeAt(i%e.length)+i)%l.length);return"REF-".concat(r)}},6341:(e,t,l)=>{"use strict";l.d(t,{$:()=>a});var r=l(5155),i=l(3999);let a=(0,l(2115).forwardRef)((e,t)=>{let{className:l,...a}=e;return(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"absolute -bottom-1 -right-1 w-full h-full border-r border-b border-foreground/20 group-hover:border-foreground/40 transition-all duration-300 -z-10"}),(0,r.jsx)("textarea",{className:(0,i.cn)("block w-full bg-background/80 px-3 py-2 text-sm font-serif min-h-[100px]","border border-foreground/30 focus:outline-none focus:ring-1 focus:ring-foreground/50","transition-all duration-200 placeholder:text-foreground/50 resize-none",l),ref:t,...a})]})});a.displayName="VintageTextarea"},7597:(e,t,l)=>{"use strict";l.d(t,{TorchProvider:()=>o,i:()=>s});var r=l(5155),i=l(2115),a=l(1362);let n=(0,i.createContext)(void 0),s=()=>{let e=(0,i.useContext)(n);if(!e)throw Error("useTorch must be used within a TorchProvider");return e},o=e=>{let{children:t}=e,[l,s]=(0,i.useState)(!1),[o,d]=(0,i.useState)(!1),[c,m]=(0,i.useState)(!1),{theme:u}=(0,a.D)();(0,i.useEffect)(()=>{m(!0);let e=()=>{let e="ontouchstart"in window||navigator.maxTouchPoints>0,t=window.screen.width;window.screen.height,d(!e||t>=1024)};e(),window.addEventListener("resize",e);let t=localStorage.getItem("torch-enabled");return null!==t&&s("true"===t),()=>window.removeEventListener("resize",e)},[]),(0,i.useEffect)(()=>{c&&"dark"!==u&&l&&x(!1)},[u,c]);let x=e=>{s(e),c&&localStorage.setItem("torch-enabled",e.toString())};return(0,r.jsx)(n.Provider,{value:{torchEnabled:l,setTorchEnabled:x,isDesktop:o},children:t})}},8975:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>A});var r=l(5155),i=l(3781),a=l(1609),n=l(9391),s=l(3999),o=l(7597),d=l(1539),c=l(2115);function m(e){if(null==e)return NaN;let t=e.replace(/[^0-9.,-]/g,"");if(!t)return NaN;let l=Number(t.replace(/,/g,""));return Number.isNaN(l)?NaN:l}function u(e){var t,l,r,i,a,n;let s=e.trim();if(!s)return"";let o=s.replace(/[^A-Za-z0-9\s]/g," ").split(/\s+/).filter(Boolean);return o.length?((null!=(i=null==(t=o[0])?void 0:t[0])?i:"")+(o.length>1?null!=(a=null==(l=o[1])?void 0:l[0])?a:"":null!=(n=null==(r=o[0])?void 0:r.slice(1,2))?n:"")).toUpperCase():""}function x(e){let t=m(e.quantity),l=m(e.rate);return Number.isNaN(t)||Number.isNaN(l)?Number.isNaN(l)?0:l:t*l}function p(e,t){let l=m(t);return!Number.isNaN(l)&&l>0?Math.round(e/l*100)/100:Math.round(100*e)/100}let b=[{id:"1",description:"",quantity:void 0,rate:void 0,lineTotalInput:void 0}],h={billFromName:"Salaar Khan",billFromCompany:"",billFromEmail:"salaarkhan.dev@gmail.com",billFromWebsite:"salaarkhan-dev.github.io",billFromAddress:"Pakistan",billToName:"Herbert Digital Pty Ltd",billToCompany:"",billToEmail:"accounts@herbertdigital.com",billToWebsite:"herbertdigital.com",billToAddress:"Australia",remittanceDetails:"Account Title: SALAAR KHAN\nBank Name: Bank Alfalah\nIBAN: PK56ALFH0131001007955457\nSWIFT Code: ALFHPKKAXXX",signatureName:"Salaar Khan"},g={billFromName:"",billFromCompany:"",billFromEmail:"",billFromWebsite:"",billFromAddress:"",billToName:"",billToCompany:"",billToEmail:"",billToWebsite:"",billToAddress:"",issueDate:"",dueDate:"",currency:"AUD",invoiceIdManual:"",taxLabel:"",taxPercent:"",discountLabel:"",discountAmount:"",notes:"Heartfelt thanks for choosing to work together.",remittanceDetails:"",signatureName:"",logoUrl:"",logoFileInputKey:0};var f=l(1617);let y=f.vv.create({page:{paddingTop:28,paddingBottom:28,paddingHorizontal:40,fontSize:12,fontFamily:"Times-Roman",backgroundColor:"#f4eee0",color:"#111827",flexDirection:"column"},body:{flexGrow:1},headerRow:{flexDirection:"row",justifyContent:"space-between",marginBottom:16,borderBottomWidth:1,borderColor:"#E5E7EB",paddingBottom:8},headerLeft:{flexGrow:1,paddingRight:12},headerTitle:{fontSize:20,letterSpacing:1.5,textTransform:"uppercase",marginTop:2,fontFamily:"Times-Bold"},headerMeta:{marginTop:4,color:"#111827",fontSize:11},headerMetaRow:{marginTop:6},headerMetaLabel:{fontSize:8,letterSpacing:1.5,textTransform:"uppercase",color:"#6B7280"},headerMetaLine:{fontSize:11,fontFamily:"Courier",color:"#111827"},headerMetaEmphasis:{fontSize:11,fontFamily:"Courier",color:"#111827"},headerRight:{alignItems:"flex-end"},seal:{width:96,height:80,marginBottom:6,objectFit:"contain"},smallLabel:{fontSize:10,letterSpacing:1.5,textTransform:"uppercase",color:"#6B7280"},mono:{fontFamily:"Courier"},sectionRow:{flexDirection:"row",justifyContent:"space-between",marginTop:10,marginBottom:14},column:{width:"48%",paddingVertical:4,paddingHorizontal:0},sectionTitle:{fontSize:9,letterSpacing:2,textTransform:"uppercase",color:"#4B5563",marginBottom:4,fontFamily:"Courier"},nameText:{fontSize:13,fontFamily:"Times-Bold"},mutedLine:{fontSize:11,color:"#4B5563",marginTop:1},table:{borderWidth:1,borderColor:"#E4DCC8",marginBottom:14},tableHeader:{flexDirection:"row",backgroundColor:"#111827",borderBottomWidth:1,borderColor:"#E4DCC8",paddingVertical:4},tableRow:{flexDirection:"row",paddingVertical:4,borderTopWidth:.5,borderColor:"#E4DCC8",minHeight:16},colDesc:{flex:2,paddingHorizontal:6},colNumber:{flex:1,paddingHorizontal:6,textAlign:"right"},numberCellText:{fontFamily:"Courier",fontSize:11},notesAndTotalsRow:{flexDirection:"row",justifyContent:"space-between",marginTop:8},notesCol:{width:"55%",paddingRight:10},notesBody:{fontSize:11,lineHeight:1.3,color:"#111827"},paymentLine:{fontSize:11,fontFamily:"Courier",color:"#111827"},paymentLabel:{fontSize:11,fontFamily:"Courier",fontWeight:"bold"},metaBox:{marginTop:12,paddingTop:6,borderTopWidth:1,borderColor:"#E4DCC8",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start"},metaLine:{fontSize:10,fontFamily:"Courier",color:"#4B5563"},totalsBox:{width:"40%",borderWidth:1,borderColor:"#E4DCC8",padding:8,backgroundColor:"#F1EADF"},totalsRow:{flexDirection:"row",justifyContent:"space-between",marginBottom:3},totalsLabel:{fontSize:11},totalsValue:{fontSize:11,fontFamily:"Courier"},totalsTotalRow:{borderTopWidth:1,borderColor:"#D1D5DB",paddingTop:4,marginTop:4},signatureRow:{marginTop:56,alignItems:"flex-end"},signatureImage:{width:120,height:40,objectFit:"contain"},signatureLabel:{marginTop:4,fontSize:11,color:"#4B5563"},footer:{marginTop:12,paddingTop:6,borderTopWidth:1,borderColor:"#E5E7EB",fontSize:10,color:"#9CA3AF",textAlign:"center",fontFamily:"Courier"},tableHeaderText:{color:"#F9F5EC",fontFamily:"Times-Bold",fontSize:11},bottomRow:{marginTop:32,flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end"},bottomLeft:{width:"55%"}});var N=l(4767);let j=N.Ikc({billFromName:N.YjP().trim().min(1,"Bill From name is required."),billToName:N.YjP().trim().min(1,"Bill To name is required."),billFromEmail:N.YjP().trim().min(1,"Your email is required.").email("Enter a valid email address."),billToEmail:N.YjP().trim().min(1,"Client email is required.").email("Enter a valid client email address."),issueDate:N.YjP().trim().min(1,"Issue date is required."),signatureName:N.YjP().trim().min(1,"Signature name is required.")});var v=l(6341);function T(e){let{formData:t,errors:l,handlers:i}=e;return(0,r.jsxs)("div",{className:"flex-1 min-w-[0]",children:[(0,r.jsx)("div",{className:"text-[11px] uppercase tracking-[0.25em] text-muted-foreground mb-1",children:"Bill From"}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(a.J,{placeholder:"Your name (required)",value:t.billFromName,onChange:e=>{i.setBillFromName(e.target.value),l.billFromName&&i.clearFieldError("billFromName")}}),l.billFromName&&(0,r.jsx)("p",{className:"mt-1 text-[10px] font-mono uppercase tracking-[0.15em] text-red-700",children:l.billFromName}),(0,r.jsx)(a.J,{placeholder:"Your company / title (optional)",value:t.billFromCompany,onChange:e=>i.setBillFromCompany(e.target.value)}),(0,r.jsx)(a.J,{placeholder:"Email (required)",value:t.billFromEmail,onChange:e=>{i.setBillFromEmail(e.target.value),l.billFromEmail&&i.clearFieldError("billFromEmail")}}),l.billFromEmail&&(0,r.jsx)("p",{className:"mt-1 text-[10px] font-mono uppercase tracking-[0.15em] text-red-700",children:l.billFromEmail}),(0,r.jsx)(a.J,{placeholder:"Website (optional)",value:t.billFromWebsite,onChange:e=>i.setBillFromWebsite(e.target.value)}),(0,r.jsx)(v.$,{placeholder:"Address / City / Country (optional)",value:t.billFromAddress,onChange:e=>i.setBillFromAddress(e.target.value),className:"min-h-[75px]"})]})]})}function F(e){let{formData:t,errors:l,handlers:i}=e;return(0,r.jsxs)("div",{className:"flex-1 min-w-[0]",children:[(0,r.jsx)("div",{className:"text-[11px] uppercase tracking-[0.25em] text-muted-foreground mb-1",children:"Bill To"}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(a.J,{placeholder:"Client name (required)",value:t.billToName,onChange:e=>{i.setBillToName(e.target.value),l.billToName&&i.clearFieldError("billToName")}}),l.billToName&&(0,r.jsx)("p",{className:"mt-1 text-[10px] font-mono uppercase tracking-[0.15em] text-red-700",children:l.billToName}),(0,r.jsx)(a.J,{placeholder:"Company name (optional)",value:t.billToCompany,onChange:e=>i.setBillToCompany(e.target.value)}),(0,r.jsx)(a.J,{placeholder:"Email (required)",value:t.billToEmail,onChange:e=>{i.setBillToEmail(e.target.value),l.billToEmail&&i.clearFieldError("billToEmail")}}),l.billToEmail&&(0,r.jsx)("p",{className:"mt-1 text-[10px] font-mono uppercase tracking-[0.15em] text-red-700",children:l.billToEmail}),(0,r.jsx)(a.J,{placeholder:"Website (optional)",value:t.billToWebsite,onChange:e=>i.setBillToWebsite(e.target.value)}),(0,r.jsx)(v.$,{placeholder:"Address / City / Country (optional)",value:t.billToAddress,onChange:e=>i.setBillToAddress(e.target.value),className:"min-h-[75px]"})]})]})}function E(e){let{lineItems:t,currency:l,handlers:i}=e;return(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("div",{className:"text-[11px] uppercase tracking-[0.25em] text-muted-foreground mb-2",children:"Scope of Investigation"}),(0,r.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm font-serif border-t border-b border-foreground/20",children:[(0,r.jsx)("thead",{className:"bg-foreground text-background",children:(0,r.jsxs)("tr",{className:"text-left",children:[(0,r.jsx)("th",{className:"px-3 py-2 w-1/2 font-semibold",children:"Description"}),(0,r.jsx)("th",{className:"px-3 py-2 w-24 text-right font-semibold",children:"Qty / Hours / Days"}),(0,r.jsxs)("th",{className:"px-3 py-2 w-24 text-right font-semibold",children:["Rate (",l,")"]}),(0,r.jsx)("th",{className:"px-3 py-2 w-24 text-right font-semibold",children:"Line Total"}),(0,r.jsx)("th",{className:"px-3 py-2 w-10 text-right print:hidden"})]})}),(0,r.jsx)("tbody",{children:t.map(e=>{var l,n;let s=x(e),o=!!(null==(l=e.description)?void 0:l.trim())||null!=e.quantity&&""!==e.quantity.trim()||null!=e.rate&&""!==e.rate.trim();return(0,r.jsxs)("tr",{className:"border-t border-foreground/10 align-top",children:[(0,r.jsx)("td",{className:"px-3 py-2",children:(0,r.jsx)(v.$,{placeholder:"Description of work (optional)",value:null!=(n=e.description)?n:"",onChange:t=>i.handleLineChange(e.id,"description",t.target.value),className:"min-h-[60px]"})}),(0,r.jsx)("td",{className:"px-3 py-2 align-top",children:(0,r.jsx)(a.J,{type:"text",inputMode:"decimal",placeholder:"0",value:null!=e.quantity?e.quantity:"",onChange:t=>i.handleLineChange(e.id,"quantity",t.target.value),className:"text-right"})}),(0,r.jsx)("td",{className:"px-3 py-2 align-top",children:(0,r.jsx)(a.J,{type:"text",inputMode:"decimal",placeholder:"0.00",value:null!=e.rate?e.rate:"",onChange:t=>i.handleLineChange(e.id,"rate",t.target.value),className:"text-right"})}),(0,r.jsx)("td",{className:"px-3 py-2 align-top text-right",children:(0,r.jsx)(a.J,{type:"text",inputMode:"decimal",placeholder:"0.00",value:null!=e.lineTotalInput?e.lineTotalInput:o&&s>0?s.toFixed(2):"",onChange:t=>i.handleLineTotalChange(e.id,t.target.value),className:"text-right","aria-label":"Line total"})}),(0,r.jsx)("td",{className:"px-3 py-2 align-top text-right print:hidden",children:(0,r.jsx)("button",{type:"button",className:"text-[11px] uppercase tracking-[0.2em] text-muted-foreground hover:text-foreground",onClick:()=>i.removeLineItem(e.id),children:t.length>1?"Remove":""})})]},e.id)})})]})}),(0,r.jsx)("div",{className:"md:hidden space-y-3",children:t.map(e=>{var n,s;let o=x(e),d=!!(null==(n=e.description)?void 0:n.trim())||null!=e.quantity&&""!==e.quantity.trim()||null!=e.rate&&""!==e.rate.trim();return(0,r.jsxs)("div",{className:"border border-foreground/20 bg-background/80 p-3 space-y-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-[11px] uppercase tracking-[0.2em] text-muted-foreground mb-1",children:"Description"}),(0,r.jsx)(v.$,{placeholder:"Description of work (optional)",value:null!=(s=e.description)?s:"",onChange:t=>i.handleLineChange(e.id,"description",t.target.value),className:"min-h-[70px]"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-[11px] text-muted-foreground mb-1",children:"Qty / Hours / Days"}),(0,r.jsx)(a.J,{type:"text",inputMode:"decimal",placeholder:"0",value:null!=e.quantity?e.quantity:"",onChange:t=>i.handleLineChange(e.id,"quantity",t.target.value),className:"text-right"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-[11px] text-muted-foreground mb-1",children:["Rate (",l,")"]}),(0,r.jsx)(a.J,{type:"text",inputMode:"decimal",placeholder:"0.00",value:null!=e.rate?e.rate:"",onChange:t=>i.handleLineChange(e.id,"rate",t.target.value),className:"text-right"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm gap-2",children:[(0,r.jsx)("span",{className:"text-[11px] text-muted-foreground",children:"Line Total"}),(0,r.jsx)(a.J,{type:"text",inputMode:"decimal",placeholder:"0.00",value:null!=e.lineTotalInput?e.lineTotalInput:d&&o>0?o.toFixed(2):"",onChange:t=>i.handleLineTotalChange(e.id,t.target.value),className:"w-28 text-right","aria-label":"Line total"})]}),(0,r.jsx)("div",{className:"flex justify-end pt-1",children:(0,r.jsx)("button",{type:"button",className:"text-[11px] uppercase tracking-[0.2em] text-muted-foreground hover:text-foreground",onClick:()=>i.removeLineItem(e.id),children:t.length>1?"Remove":""})})]},e.id)})}),(0,r.jsxs)("div",{className:"mt-2 flex justify-between items-center print:hidden",children:[(0,r.jsx)("div",{className:"text-[11px] text-muted-foreground italic",children:"Add as many lines as needed. Empty lines will be visually minimal in print."}),(0,r.jsx)(n.R,{variant:"ghost",onClick:i.addLineItem,children:"Add Line"})]})]})}async function w(e){return new Promise(t=>{let l=new FileReader;l.onload=()=>{let r=l.result;if("string"!=typeof r)return void t({dataUrl:"",label:e.name||"Image selected"});let i=e.name||"Image selected";if("image/png"===e.type||"image/jpeg"===e.type||"image/jpg"===e.type)return void t({dataUrl:r,label:i});let a=new Image;a.onload=()=>{try{let e=document.createElement("canvas");e.width=a.naturalWidth||a.width||0,e.height=a.naturalHeight||a.height||0;let l=e.getContext("2d");if(!l||!e.width||!e.height)return void t({dataUrl:r,label:i});l.drawImage(a,0,0);let n=e.toDataURL("image/png");t({dataUrl:n,label:i})}catch(e){t({dataUrl:r,label:i})}},a.onerror=()=>{t({dataUrl:r,label:i})},a.src=r},l.readAsDataURL(e)})}var C=l(4416);function D(e){let{formData:t,handlers:l}=e,i=(0,c.useRef)(null);return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-[11px] uppercase tracking-[0.25em] text-muted-foreground mb-2",children:"Branding"}),(0,r.jsx)("div",{className:"border border-foreground/30 bg-background/60 px-3 py-2",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row items-stretch text-[11px] md:text-[10px] gap-3 md:gap-0",children:[(0,r.jsxs)("div",{className:"flex-1 space-y-2 pr-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"uppercase tracking-wide text-muted-foreground/90 mb-1",children:"Logo (optional)"}),(0,r.jsx)("input",{ref:i,type:"file",accept:"image/*",className:"block w-auto text-[10px] file:text-[10px] file:border file:border-foreground/30 file:px-2 file:py-1 file:bg-background/80 file:cursor-pointer",onChange:async e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(!r)return;let{dataUrl:i,label:a}=await w(r);i&&l.setLogoUrl(i)}},t.logoFileInputKey)]}),(0,r.jsx)("div",{className:"text-[10px] text-muted-foreground/80 font-mono",children:"Leave blank to use the default seal."})]}),(0,r.jsx)("div",{className:"hidden md:block w-px bg-foreground/15 mx-2"}),(0,r.jsx)("div",{className:"flex flex-col items-center justify-center gap-1 pl-0 md:pl-2 md:items-center",children:(0,r.jsxs)("div",{className:"relative",children:[t.logoUrl&&(0,r.jsx)("button",{type:"button","aria-label":"Clear logo",className:"cursor-pointer absolute -top-1 -right-1 h-4 w-4 rounded-full bg-background/95 border border-foreground/40 text-[10px] leading-none flex items-center justify-center text-muted-foreground hover:text-foreground hover:border-foreground/70",onClick:()=>{l.setLogoUrl(""),l.setLogoFileInputKey(t.logoFileInputKey+1)},children:(0,r.jsx)(C.A,{className:"w-3 h-3"})}),(0,r.jsx)("button",{type:"button",onClick:()=>{var e;return null==(e=i.current)?void 0:e.click()},className:"w-24 h-24 md:w-20 md:h-20 max-w-full border border-foreground/20 bg-background flex items-center justify-center overflow-hidden cursor-pointer hover:border-foreground/40 transition-colors","aria-label":"Upload logo",children:(0,r.jsx)("img",{src:t.logoUrl||"https://res.cloudinary.com/dnpxalm5i/image/upload/f_auto,q_auto,w_256/gh-pages/public/images/seal.png",alt:"Logo preview",className:"max-w-full max-h-full object-contain"})})]})})]})})]})}function L(e){let{formData:t,calculations:l,currency:i,handlers:n,brandingFormData:s,brandingHandlers:o}=e;return(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 mt-4",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-[0] space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-[11px] uppercase tracking-[0.25em] text-muted-foreground mb-2",children:"Notes to Client"}),(0,r.jsx)(v.$,{value:t.notes,onChange:e=>n.setNotes(e.target.value),placeholder:"Any closing remarks, context on the investigation, or next steps. Optional.",className:"min-h-[120px]"})]}),(0,r.jsx)(D,{formData:s,handlers:o})]}),(0,r.jsxs)("div",{className:"w-full md:w-72 md:self-stretch flex flex-col",children:[(0,r.jsx)("div",{className:"text-[11px] uppercase tracking-[0.25em] text-muted-foreground mb-2",children:"Summary"}),(0,r.jsxs)("div",{className:"border border-foreground/30 p-4 bg-muted/20 space-y-2 text-sm font-serif flex-1 flex flex-col justify-between",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Subtotal"}),(0,r.jsxs)("span",{children:[i," ",l.subtotal.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"mt-1",children:[(0,r.jsx)("div",{className:"text-[11px] text-muted-foreground mb-1",children:"Tax (optional)"}),(0,r.jsxs)("div",{className:"grid grid-cols-[1fr_auto] gap-2 items-center",children:[(0,r.jsx)(a.J,{placeholder:"Label (e.g. VAT)",value:t.taxLabel,onChange:e=>n.setTaxLabel(e.target.value)}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(a.J,{type:"number",inputMode:"decimal",placeholder:"%",value:t.taxPercent,onChange:e=>n.setTaxPercent(e.target.value),className:"w-16 text-right","aria-label":"Tax percentage"}),(0,r.jsx)("span",{className:"text-[11px] text-muted-foreground",children:"%"})]})]}),0!==l.taxAmount&&(0,r.jsxs)("div",{className:"mt-1 flex justify-between text-xs text-muted-foreground",children:[(0,r.jsx)("span",{children:t.taxLabel||"Tax"}),(0,r.jsxs)("span",{children:[i," ",l.taxAmount.toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("div",{className:"text-[11px] text-muted-foreground mb-1",children:"Discount (optional)"}),(0,r.jsxs)("div",{className:"grid grid-cols-[1fr_auto] gap-2 items-center",children:[(0,r.jsx)(a.J,{placeholder:"Label (e.g. Courtesy)",value:t.discountLabel,onChange:e=>n.setDiscountLabel(e.target.value)}),(0,r.jsx)(a.J,{type:"number",inputMode:"decimal",placeholder:"0.00",value:t.discountAmount,onChange:e=>n.setDiscountAmount(e.target.value),className:"w-24 text-right","aria-label":"Discount amount"})]}),0!==l.discountValue&&(0,r.jsxs)("div",{className:"mt-1 flex justify-between text-xs text-muted-foreground",children:[(0,r.jsx)("span",{children:t.discountLabel||"Discount"}),(0,r.jsxs)("span",{children:["- ",i," ",l.discountValue.toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"border-t border-foreground/40 mt-3 pt-2 font-semibold flex justify-between text-sm",children:[(0,r.jsx)("span",{children:"Total"}),(0,r.jsxs)("span",{children:[i," ",l.grandTotal.toFixed(2)]})]})]})]})]})}function I(e){let{formData:t,errors:l,handlers:i}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mt-6 border-t border-foreground/20 pt-3",children:[(0,r.jsx)("div",{className:"text-[11px] uppercase tracking-[0.25em] text-muted-foreground mb-2",children:"Signature"}),(0,r.jsx)(a.J,{value:t.signatureName,onChange:e=>{i.setSignatureName(e.target.value),l.signatureName&&i.clearFieldError("signatureName")},placeholder:"Name to render in signature image"}),l.signatureName&&(0,r.jsx)("p",{className:"mt-1 text-[10px] font-mono uppercase tracking-[0.15em] text-red-700",children:l.signatureName})]}),(t.remittanceDetails.trim().length,(0,r.jsxs)("div",{className:"mt-6 border-t border-foreground/20 pt-3",children:[(0,r.jsx)("div",{className:"text-[11px] uppercase tracking-[0.25em] text-muted-foreground mb-2",children:"Remittance Details"}),(0,r.jsx)(v.$,{value:t.remittanceDetails,onChange:e=>i.setRemittanceDetails(e.target.value),placeholder:"Bank, Stripe, Wise, or other payment instructions. Use lines like 'Label: Value' – text before ':' will be bold in the PDF.",className:"min-h-[100px]"})]}))]})}let S=["USD","EUR","AUD","PKR","CAD"];function A(){let{lineItems:e,handlers:t}=function(){let[e,t]=(0,c.useState)(b);return{lineItems:e,handlers:{handleLineChange:(e,l,r)=>{t(t=>t.map(t=>{if(t.id!==e)return t;if("quantity"===l||"rate"===l){let e=r.replace(/[^0-9.,]/g,"");return{...t,[l]:e,lineTotalInput:void 0}}if("lineTotalInput"===l){let e=r.replace(/[^0-9.,-]/g,"");return{...t,lineTotalInput:e}}return{...t,[l]:r}}))},handleLineTotalChange:(e,l)=>{t(t=>t.map(t=>{if(t.id!==e)return t;let r=l.replace(/[^0-9.,-]/g,""),i=m(r);if(Number.isNaN(i))return{...t,rate:void 0,lineTotalInput:r};let a=m(t.quantity);if(!Number.isNaN(a)&&a>0){let e=p(i,t.quantity||"");return{...t,rate:e.toFixed(2),lineTotalInput:r}}let n=p(i,"1");return{...t,rate:n.toFixed(2),lineTotalInput:r}}))},addLineItem:()=>{t(e=>[...e,{id:String(Date.now()),description:"",quantity:void 0,rate:void 0,lineTotalInput:void 0}])},removeLineItem:e=>{t(t=>t.length<=1?t:t.filter(t=>t.id!==e))}}}}(),{formData:l,calculations:x,errors:N,handlers:v,setFieldErrors:w}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,l]=(0,c.useState)(g),[r,i]=(0,c.useState)({}),a=(0,c.useMemo)(()=>{let l=(()=>{let e=u(t.billFromName||""),l=u(t.billToCompany||t.billToName||""),r=function(e){if(!e)return"";let t=new Date(e);if(Number.isNaN(t.getTime()))return"";let l=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return"".concat(l).concat(r).concat(i)}(t.issueDate);return e&&l&&r?"".concat(e,"-").concat(l,"-").concat(r):""})(),r=t.invoiceIdManual||l,i=function(e){let t=e.trim();if(t)try{let e=btoa(unescape(encodeURIComponent(t)));return"https://see.fontimg.com/api/rf5/e9j06/NTcwZDdiY2FmZmM5NGEyN2E2YmMwMzVlYWFlMWQ4OTQub3Rm/".concat(e,"/maellen.png?r=fs&h=65&w=1000&fg=000000&bg=FFFFFF&tb=1&s=65")}catch(e){return}}(t.signatureName),a=e.reduce((e,t)=>{if(null!=t.lineTotalInput&&""!==t.lineTotalInput.trim()){let l=m(t.lineTotalInput);if(!Number.isNaN(l))return e+l}let l=m(t.quantity),r=m(t.rate);return Number.isNaN(l)||Number.isNaN(r)?e:e+l*r},0),n=function(e,t,l){let r=parseFloat(t);return!l&&(Number.isNaN(r)||0===r)||Number.isNaN(r)||0===r?0:e*r/100}(a,t.taxPercent,t.taxLabel),s=function(e,t){let l=parseFloat(e);return!t&&(Number.isNaN(l)||0===l)||Number.isNaN(l)||0===l?0:l}(t.discountAmount,t.discountLabel),o=a+n-s;return{suggestedInvoiceId:l,effectiveInvoiceId:r,signatureUrl:i,subtotal:a,taxAmount:n,discountValue:s,grandTotal:o}},[t.billFromName,t.billToCompany,t.billToName,t.issueDate,t.invoiceIdManual,t.signatureName,t.taxPercent,t.taxLabel,t.discountAmount,t.discountLabel,e]);return{formData:t,calculations:a,errors:r,handlers:{setBillFromName:e=>l(t=>({...t,billFromName:e})),setBillFromCompany:e=>l(t=>({...t,billFromCompany:e})),setBillFromEmail:e=>l(t=>({...t,billFromEmail:e})),setBillFromWebsite:e=>l(t=>({...t,billFromWebsite:e})),setBillFromAddress:e=>l(t=>({...t,billFromAddress:e})),setBillToName:e=>l(t=>({...t,billToName:e})),setBillToCompany:e=>l(t=>({...t,billToCompany:e})),setBillToEmail:e=>l(t=>({...t,billToEmail:e})),setBillToWebsite:e=>l(t=>({...t,billToWebsite:e})),setBillToAddress:e=>l(t=>({...t,billToAddress:e})),setIssueDate:e=>l(t=>({...t,issueDate:e})),setDueDate:e=>l(t=>({...t,dueDate:e})),setCurrency:e=>l(t=>({...t,currency:e})),setInvoiceIdManual:e=>l(t=>({...t,invoiceIdManual:e})),setTaxLabel:e=>l(t=>({...t,taxLabel:e})),setTaxPercent:e=>l(t=>({...t,taxPercent:e})),setDiscountLabel:e=>l(t=>({...t,discountLabel:e})),setDiscountAmount:e=>l(t=>({...t,discountAmount:e})),setNotes:e=>l(t=>({...t,notes:e})),setRemittanceDetails:e=>l(t=>({...t,remittanceDetails:e})),setSignatureName:e=>l(t=>({...t,signatureName:e})),setLogoUrl:e=>l(t=>({...t,logoUrl:e})),setLogoInputValue:e=>l(t=>({...t,logoInputValue:e})),setLogoFileInputKey:e=>l(t=>({...t,logoFileInputKey:e})),clearFieldError:e=>{i(t=>{let l={...t};return delete l[e],l})},loadMyProfile:()=>{l(e=>({...e,...h}))}},setFieldErrors:i}}(e),{isExporting:C,handleExportPdf:D}=function(){let[e,t]=(0,c.useState)(!1),l=async(l,i,a,n)=>{if(!e){t(!0);try{let e=function(e,t){let l=j.safeParse({billFromName:e.billFromName,billToName:e.billToName,billFromEmail:e.billFromEmail,billToEmail:e.billToEmail,issueDate:e.issueDate,signatureName:e.signatureName}),r={};if(!l.success){var i,a,n,s,o,d;let e=l.error.flatten().fieldErrors;(null==(i=e.billFromName)?void 0:i[0])&&(r.billFromName=e.billFromName[0]),(null==(a=e.billToName)?void 0:a[0])&&(r.billToName=e.billToName[0]),(null==(n=e.billFromEmail)?void 0:n[0])&&(r.billFromEmail=e.billFromEmail[0]),(null==(s=e.billToEmail)?void 0:s[0])&&(r.billToEmail=e.billToEmail[0]),(null==(o=e.issueDate)?void 0:o[0])&&(r.issueDate=e.issueDate[0]),(null==(d=e.signatureName)?void 0:d[0])&&(r.signatureName=e.signatureName[0])}return t&&""!==t.trim()||(r.invoiceId="Invoice ID is required (enter one or select an Issue Date)."),{isValid:0===Object.keys(r).length,errors:r}}(l,i.effectiveInvoiceId);if(!e.isValid)return void n(e.errors);n({});let t={invoiceId:i.effectiveInvoiceId||"UNASSIGNED",issueDate:l.issueDate,dueDate:l.dueDate,currency:l.currency,billFromName:l.billFromName,billFromCompany:l.billFromCompany,billFromEmail:l.billFromEmail,billFromWebsite:l.billFromWebsite,billFromAddress:l.billFromAddress,billToName:l.billToName,billToCompany:l.billToCompany,billToEmail:l.billToEmail,billToWebsite:l.billToWebsite,billToAddress:l.billToAddress,lineItems:a.map(e=>{let t,l=m(e.quantity),r=m(e.rate),i=null!=e.lineTotalInput&&""!==e.lineTotalInput.trim()?m(e.lineTotalInput):NaN;return Number.isNaN(i)?Number.isNaN(l)||Number.isNaN(r)||(t=l*r):t=i,{description:e.description,quantity:Number.isNaN(l)?void 0:l,rate:Number.isNaN(r)?void 0:r,lineTotal:t}}),subtotal:i.subtotal,taxAmount:i.taxAmount,discountValue:i.discountValue,grandTotal:i.grandTotal,taxLabel:l.taxLabel,discountLabel:l.discountLabel,notes:l.notes,remittanceDetails:l.remittanceDetails,sealUrl:"https://res.cloudinary.com/dnpxalm5i/image/upload/f_auto,q_auto,w_256/gh-pages/public/images/seal.png",logoUrl:l.logoUrl,signatureUrl:i.signatureUrl},s=await (0,f.x8)(function(e){var t;let{data:l}=e,i=null!=(t=l.lineItems)?t:[];return(0,r.jsx)(f.yo,{children:(0,r.jsxs)(f.YW,{size:"A4",style:y.page,children:[(0,r.jsxs)(f.Ss,{style:y.headerRow,children:[(0,r.jsxs)(f.Ss,{style:y.headerLeft,children:[(0,r.jsx)(f.EY,{style:y.headerTitle,children:"Invoice"}),(0,r.jsxs)(f.Ss,{style:y.headerMetaRow,children:[(0,r.jsx)(f.EY,{style:y.headerMetaLabel,children:"Invoice No."}),(0,r.jsx)(f.EY,{style:y.headerMetaEmphasis,children:l.invoiceId})]}),(0,r.jsxs)(f.Ss,{style:y.headerMetaRow,children:[(0,r.jsx)(f.EY,{style:y.headerMetaLabel,children:l.dueDate?"Issued / Due":"Issued"}),(0,r.jsxs)(f.EY,{style:y.headerMetaEmphasis,children:[l.issueDate||"—",l.dueDate?" / ".concat(l.dueDate):""]})]})]}),(0,r.jsx)(f.Ss,{style:y.headerRight,children:(l.logoUrl||l.sealUrl)&&(0,r.jsx)(f._V,{src:l.logoUrl||l.sealUrl,style:y.seal})})]}),(0,r.jsxs)(f.Ss,{style:y.body,children:[(0,r.jsxs)(f.Ss,{style:y.sectionRow,children:[(0,r.jsxs)(f.Ss,{style:y.column,children:[(0,r.jsx)(f.EY,{style:y.sectionTitle,children:"Bill From"}),(0,r.jsx)(f.EY,{style:y.nameText,children:l.billFromName}),l.billFromCompany&&(0,r.jsx)(f.EY,{style:y.mutedLine,children:l.billFromCompany}),l.billFromEmail&&(0,r.jsx)(f.EY,{style:y.mutedLine,children:l.billFromEmail}),l.billFromWebsite&&(0,r.jsx)(f.EY,{style:y.mutedLine,children:l.billFromWebsite}),l.billFromAddress&&(0,r.jsx)(f.EY,{style:y.mutedLine,children:l.billFromAddress})]}),(0,r.jsxs)(f.Ss,{style:y.column,children:[(0,r.jsx)(f.EY,{style:y.sectionTitle,children:"Bill To"}),(0,r.jsx)(f.EY,{style:y.nameText,children:l.billToName}),l.billToCompany&&(0,r.jsx)(f.EY,{style:y.mutedLine,children:l.billToCompany}),l.billToEmail&&(0,r.jsx)(f.EY,{style:y.mutedLine,children:l.billToEmail}),l.billToWebsite&&(0,r.jsx)(f.EY,{style:y.mutedLine,children:l.billToWebsite}),l.billToAddress&&(0,r.jsx)(f.EY,{style:y.mutedLine,children:l.billToAddress})]})]}),(0,r.jsxs)(f.Ss,{children:[(0,r.jsx)(f.EY,{style:y.sectionTitle,children:"Line Items"}),(0,r.jsxs)(f.Ss,{style:y.table,children:[(0,r.jsxs)(f.Ss,{style:y.tableHeader,children:[(0,r.jsx)(f.Ss,{style:y.colDesc,children:(0,r.jsx)(f.EY,{style:y.tableHeaderText,children:"Description"})}),(0,r.jsx)(f.Ss,{style:y.colNumber,children:(0,r.jsx)(f.EY,{style:y.tableHeaderText,children:"Qty"})}),(0,r.jsx)(f.Ss,{style:y.colNumber,children:(0,r.jsxs)(f.EY,{style:y.tableHeaderText,children:["Rate (",l.currency,")"]})}),(0,r.jsx)(f.Ss,{style:y.colNumber,children:(0,r.jsx)(f.EY,{style:y.tableHeaderText,children:"Amount"})})]}),i.map((e,t)=>{var l,i,a;if(!((null==(l=e.description)?void 0:l.trim())||null!=e.quantity||null!=e.rate||null!=e.lineTotal))return null;let n=null!=(i=e.quantity)?i:0,s=null!=(a=e.rate)?a:0,o=null!=e.lineTotal?e.lineTotal:n*s;return(0,r.jsxs)(f.Ss,{style:{...y.tableRow,backgroundColor:t%2==0?"#F7F0E2":"#FBF5EA"},children:[(0,r.jsx)(f.Ss,{style:y.colDesc,children:(0,r.jsx)(f.EY,{children:e.description||"—"})}),(0,r.jsx)(f.Ss,{style:y.colNumber,children:(0,r.jsx)(f.EY,{style:y.numberCellText,children:n||""})}),(0,r.jsx)(f.Ss,{style:y.colNumber,children:(0,r.jsx)(f.EY,{style:y.numberCellText,children:s?s.toFixed(2):""})}),(0,r.jsx)(f.Ss,{style:y.colNumber,children:(0,r.jsx)(f.EY,{style:y.numberCellText,children:o?o.toFixed(2):""})})]},t)}),Array.from({length:Math.max(0,4-i.length)}).map((e,t)=>(0,r.jsxs)(f.Ss,{style:{...y.tableRow,backgroundColor:(i.length+t)%2==0?"#F7F0E2":"#FBF5EA"},children:[(0,r.jsx)(f.Ss,{style:y.colDesc,children:(0,r.jsx)(f.EY,{children:"\xa0"})}),(0,r.jsx)(f.Ss,{style:y.colNumber,children:(0,r.jsx)(f.EY,{style:y.numberCellText,children:"\xa0"})}),(0,r.jsx)(f.Ss,{style:y.colNumber,children:(0,r.jsx)(f.EY,{style:y.numberCellText,children:"\xa0"})}),(0,r.jsx)(f.Ss,{style:y.colNumber,children:(0,r.jsx)(f.EY,{style:y.numberCellText,children:"\xa0"})})]},"empty-".concat(t)))]})]}),(0,r.jsxs)(f.Ss,{style:y.notesAndTotalsRow,children:[(0,r.jsx)(f.Ss,{style:y.notesCol,children:l.notes&&(0,r.jsxs)(f.Ss,{children:[(0,r.jsx)(f.EY,{style:y.sectionTitle,children:"Notes"}),(0,r.jsx)(f.EY,{style:y.notesBody,children:l.notes})]})}),(0,r.jsxs)(f.Ss,{style:y.totalsBox,children:[(0,r.jsx)(f.EY,{style:y.sectionTitle,children:"Summary"}),(0,r.jsxs)(f.Ss,{style:y.totalsRow,children:[(0,r.jsx)(f.EY,{style:y.totalsLabel,children:"Subtotal"}),(0,r.jsxs)(f.EY,{style:y.totalsValue,children:[l.currency," ",l.subtotal.toFixed(2)]})]}),0!==l.taxAmount&&(0,r.jsxs)(f.Ss,{style:y.totalsRow,children:[(0,r.jsx)(f.EY,{style:y.totalsLabel,children:l.taxLabel||"Tax"}),(0,r.jsxs)(f.EY,{style:y.totalsValue,children:[l.currency," ",l.taxAmount.toFixed(2)]})]}),0!==l.discountValue&&(0,r.jsxs)(f.Ss,{style:y.totalsRow,children:[(0,r.jsx)(f.EY,{style:y.totalsLabel,children:l.discountLabel||"Discount"}),(0,r.jsxs)(f.EY,{style:y.totalsValue,children:["- ",l.currency," ",l.discountValue.toFixed(2)]})]}),(0,r.jsxs)(f.Ss,{style:[y.totalsRow,y.totalsTotalRow],children:[(0,r.jsx)(f.EY,{style:[y.totalsLabel,{fontWeight:600}],children:"Total"}),(0,r.jsxs)(f.EY,{style:[y.totalsValue,{fontWeight:600}],children:[l.currency," ",l.grandTotal.toFixed(2)]})]})]})]}),(0,r.jsxs)(f.Ss,{style:y.bottomRow,children:[(0,r.jsxs)(f.Ss,{style:y.bottomLeft,children:[(0,r.jsx)(f.EY,{style:y.sectionTitle,children:"Payment Details"}),l.remittanceDetails&&l.remittanceDetails.trim().length>0?l.remittanceDetails.split(/\r?\n/).map((e,t)=>{let l=e.trim();if(!l)return null;let i=l.indexOf(":");if(-1===i)return(0,r.jsx)(f.EY,{style:y.paymentLine,children:l},t);let a=l.slice(0,i).trim(),n=l.slice(i+1).trim();return(0,r.jsxs)(f.EY,{style:y.paymentLine,children:[(0,r.jsxs)(f.EY,{style:y.paymentLabel,children:[a,": "]}),n]},t)}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.EY,{style:y.paymentLine,children:[(0,r.jsx)(f.EY,{style:y.paymentLabel,children:"Account Title: "}),"XXXXXXXX"]}),(0,r.jsxs)(f.EY,{style:y.paymentLine,children:[(0,r.jsx)(f.EY,{style:y.paymentLabel,children:"Bank Name: "}),"XXXXXXXX"]}),(0,r.jsxs)(f.EY,{style:y.paymentLine,children:[(0,r.jsx)(f.EY,{style:y.paymentLabel,children:"IBAN: "}),"XXXXXXXX"]}),(0,r.jsxs)(f.EY,{style:y.paymentLine,children:[(0,r.jsx)(f.EY,{style:y.paymentLabel,children:"SWIFT Code: "}),"XXXXXXXX"]})]}),(0,r.jsx)(f.Ss,{style:y.metaBox,children:(0,r.jsxs)(f.Ss,{children:[(0,r.jsxs)(f.EY,{style:y.metaLine,children:["Invoice ID: ",l.invoiceId]}),(0,r.jsxs)(f.EY,{style:y.metaLine,children:["Billed To: ",l.billToName]}),(0,r.jsxs)(f.EY,{style:y.metaLine,children:["Prepared By: ",l.billFromName]})]})})]}),(0,r.jsxs)(f.Ss,{style:y.signatureRow,children:[(0,r.jsx)(f._V,{src:l.signatureUrl||"https://see.fontimg.com/api/rf5/e9j06/NTcwZDdiY2FmZmM5NGEyN2E2YmMwMzVlYWFlMWQ4OTQub3Rm/U2FsYWFyIEtoYW4/maellen.png?r=fs&h=65&w=1000&fg=000000&bg=FFFFFF&tb=1&s=65",style:y.signatureImage}),(0,r.jsx)(f.EY,{style:y.signatureLabel,children:"Authorised Signature"})]})]})]}),(0,r.jsx)(f.EY,{style:y.footer,children:(0,r.jsxs)(f.N_,{src:"https://salaarkhan-dev.github.io",style:{color:"#6B7280",textDecoration:"none"},children:["Generated via The Developer Times • Invoices • ",l.invoiceId]})})]})})}({data:t})).toBlob(),o=URL.createObjectURL(s),d="".concat(i.effectiveInvoiceId||"invoice",".pdf"),c=document.createElement("a");c.href=o,c.download=d,"download"in HTMLAnchorElement.prototype?(document.body.appendChild(c),c.click(),document.body.removeChild(c)):window.open(o,"_blank"),setTimeout(()=>{URL.revokeObjectURL(o)},1e4)}finally{t(!1)}}};return{isExporting:e,handleExportPdf:l}}(),{torchEnabled:A}=(0,o.i)();return(0,r.jsx)("main",{className:"py-6",children:(0,r.jsxs)(i.Section,{id:"casefile-invoices",title:"Investigation Bureau • Internal Ledger",heading:"Casefile Invoices",tagline:"A confidential register of work rendered, retainers honoured, and mysteries resolved.",decorativeText:"LEDGER",headingSize:"small",className:"max-w-5xl mx-auto px-4 relative print:max-w-none print:px-0",children:[(0,r.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-2 md:gap-3 print:hidden",children:[(0,r.jsx)("div",{className:"text-[11px] font-mono text-muted-foreground",children:"Internal tool • Not linked in navigation"}),(0,r.jsxs)("div",{className:"w-full md:w-auto flex flex-col items-stretch md:flex-row md:items-center md:justify-end gap-2 md:gap-3",children:[x.suggestedInvoiceId&&!l.invoiceIdManual&&(0,r.jsxs)("div",{className:"text-[11px] font-mono text-muted-foreground/80 md:text-right",children:[(0,r.jsx)("span",{className:"opacity-80",children:"Suggested ID:"})," ",(0,r.jsx)("span",{className:"font-semibold tracking-wide",children:x.suggestedInvoiceId})]}),A&&(0,r.jsxs)("button",{type:"button",onClick:()=>v.loadMyProfile(),className:"inline-flex items-center justify-center px-3 py-3 border border-amber-400/70 text-[11px] font-mono uppercase tracking-[0.25em] rounded-none bg-background/80 shadow-[0_1px_0_rgba(0,0,0,0.7)] hover:bg-amber-400/10 hover:border-amber-300/90 hover:shadow-[0_0_10px_rgba(251,191,36,0.5)] text-amber-100/90 hover:text-amber-50 cursor-pointer transition-all duration-200",title:"Fill investigator profile",children:[(0,r.jsx)(d.A,{className:"mr-1 h-3 w-3"}),"Torch Fill"]}),(0,r.jsx)("div",{className:"flex justify-stretch md:justify-end",children:(0,r.jsx)(n.R,{className:"w-full md:w-auto",onClick:()=>D(l,x,e,w),disabled:C,"aria-busy":C,children:C?"Preparing PDF":"Export PDF"})})]})]}),(0,r.jsxs)("div",{className:"border border-foreground/30 bg-background/95 px-6 py-6 md:px-8 md:py-8 print:border-0 print:px-10 print:py-8",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-6 border-b border-foreground/20 pb-4 mb-4",children:[(0,r.jsx)(T,{formData:{billFromName:l.billFromName,billFromCompany:l.billFromCompany,billFromEmail:l.billFromEmail,billFromWebsite:l.billFromWebsite,billFromAddress:l.billFromAddress},errors:{billFromName:N.billFromName,billFromEmail:N.billFromEmail},handlers:{setBillFromName:v.setBillFromName,setBillFromCompany:v.setBillFromCompany,setBillFromEmail:v.setBillFromEmail,setBillFromWebsite:v.setBillFromWebsite,setBillFromAddress:v.setBillFromAddress,clearFieldError:v.clearFieldError}}),(0,r.jsx)(F,{formData:{billToName:l.billToName,billToCompany:l.billToCompany,billToEmail:l.billToEmail,billToWebsite:l.billToWebsite,billToAddress:l.billToAddress},errors:{billToName:N.billToName,billToEmail:N.billToEmail},handlers:{setBillToName:v.setBillToName,setBillToCompany:v.setBillToCompany,setBillToEmail:v.setBillToEmail,setBillToWebsite:v.setBillToWebsite,setBillToAddress:v.setBillToAddress,clearFieldError:v.clearFieldError}}),(0,r.jsxs)("div",{className:"w-full md:w-64 text-left space-y-3 flex-col",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-[11px] uppercase tracking-[0.25em] text-muted-foreground mb-1",children:"Invoice No."}),(0,r.jsx)(a.J,{placeholder:x.suggestedInvoiceId||"Invoice ID",value:l.invoiceIdManual,onChange:e=>v.setInvoiceIdManual(e.target.value)}),N.invoiceId&&(0,r.jsx)("p",{className:"mt-1 text-[10px] font-mono uppercase tracking-[0.15em] text-red-700",children:N.invoiceId})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-2 text-[11px] md:text-[10px]",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-[11px] uppercase tracking-[0.25em] text-muted-foreground mb-1",children:"Issue Date"}),(0,r.jsx)(a.J,{type:"date",value:l.issueDate,onChange:e=>{v.setIssueDate(e.target.value),N.issueDate&&v.clearFieldError("issueDate")}}),N.issueDate&&(0,r.jsx)("p",{className:"mt-1 text-[10px] font-mono uppercase tracking-[0.15em] text-red-700",children:N.issueDate})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-[11px] uppercase tracking-[0.25em] text-muted-foreground mb-1",children:"Due Date (optional)"}),(0,r.jsx)(a.J,{type:"date",value:l.dueDate,min:l.issueDate?function(e){if(!e)return;let t=new Date(e);if(Number.isNaN(t.getTime()))return;let l=new Date(t);return l.setDate(t.getDate()+1),l.toISOString().slice(0,10)}(l.issueDate):void 0,onChange:e=>v.setDueDate(e.target.value)})]})]}),(0,r.jsxs)("div",{className:"text-[11px] md:text-[10px]",children:[(0,r.jsx)("div",{className:"text-[11px] uppercase tracking-[0.25em] text-muted-foreground mb-1",children:"Currency"}),(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"absolute -bottom-1 -right-1 w-full h-full border-r border-b border-foreground/20 group-hover:border-foreground/40 transition-all duration-300 -z-10"}),(0,r.jsx)("select",{className:(0,s.cn)("cursor-pointer block w-full bg-background/80 px-3 py-2 text-sm font-serif border border-foreground/30 focus:outline-none focus:ring-1 focus:ring-foreground/50 transition-all duration-200"),value:l.currency,onChange:e=>v.setCurrency(e.target.value),children:S.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]})]})]})]}),(0,r.jsx)(E,{lineItems:e,currency:l.currency,handlers:t}),(0,r.jsx)(L,{formData:{notes:l.notes,taxLabel:l.taxLabel,taxPercent:l.taxPercent,discountLabel:l.discountLabel,discountAmount:l.discountAmount},calculations:{subtotal:x.subtotal,taxAmount:x.taxAmount,discountValue:x.discountValue,grandTotal:x.grandTotal},currency:l.currency,handlers:{setNotes:v.setNotes,setTaxLabel:v.setTaxLabel,setTaxPercent:v.setTaxPercent,setDiscountLabel:v.setDiscountLabel,setDiscountAmount:v.setDiscountAmount},brandingFormData:{logoUrl:l.logoUrl,logoFileInputKey:l.logoFileInputKey},brandingHandlers:{setLogoUrl:v.setLogoUrl,setLogoFileInputKey:v.setLogoFileInputKey}}),(0,r.jsx)(I,{formData:{signatureName:l.signatureName,remittanceDetails:l.remittanceDetails},errors:{signatureName:N.signatureName},handlers:{setSignatureName:v.setSignatureName,setRemittanceDetails:v.setRemittanceDetails,clearFieldError:v.clearFieldError}}),(0,r.jsx)("div",{className:"mt-6 text-[10px] text-muted-foreground font-mono text-center",children:"Internal use • Casefile Invoices • Generated via The Developer Times desk apparatus"})]})]})})}},9344:(e,t,l)=>{Promise.resolve().then(l.bind(l,8975))},9391:(e,t,l)=>{"use strict";l.d(t,{R:()=>n});var r=l(5155),i=l(3999),a=l(1154);function n(e){let{children:t,className:l,onClick:n,type:s="button",variant:o="default",isLoading:d=!1,disabled:c=!1}=e,m=d?"cursor-wait":"";return(0,r.jsx)("button",{type:s,onClick:n,disabled:c||d,className:(0,i.cn)("inline-flex items-center justify-center px-6 py-3 font-serif text-sm tracking-wider uppercase transition-all duration-200 relative",{default:"bg-foreground text-background hover:bg-foreground/90",outline:"border border-foreground/30 bg-background/90 hover:bg-foreground/5",ghost:"hover:bg-foreground/5"}[o],c||d?"opacity-50 cursor-not-allowed":"cursor-pointer",m,"group",l),children:(0,r.jsxs)("span",{className:"inline-flex items-center gap-2",children:[d&&(0,r.jsx)(a.A,{className:"h-4 w-4 animate-spin"}),t]})})}}},e=>{e.O(0,[247,788,746,792,829,779,147,441,964,358],()=>e(e.s=9344)),_N_E=e.O()}]);